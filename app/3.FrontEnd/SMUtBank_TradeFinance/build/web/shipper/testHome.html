<!DOCTYPE html>

<head>

    <link rel="stylesheet" href="../assets/css/bootstrap.css" type="text/css" />
    <link rel="stylesheet" href="../assets/css/animate.css" type="text/css" />
    <link rel="stylesheet" href="../assets/css/font-awesome.min.css" type="text/css" />
    <link rel="stylesheet" href="../assets/css/font.css" type="text/css" />
    <link rel="stylesheet" href="../assets/css/app.css" type="text/css" />
    <link rel="stylesheet" href="../assets/css/animate.css" type="text/css" />
    <link rel="stylesheet" href="../assets/css/font-awesome.min.css" type="text/css" />
    <link rel="stylesheet" href="../assets/css/font.css" type="text/css" />
    <link rel="stylesheet" href="../assets/js/fuelux/fuelux.css" type="text/css" />
    <link rel="stylesheet" href="../assets/css/bootstrap-datetimepicker.min.css">
    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.2.1.min.js"></script>
</head>
<script type="text/javascript">
    //homeOperation(); //calling this method from assets/js/Utility/lcOperations.js
</script>
<section class="vbox">
    <section class="scrollable">

        <div class="wrapper-lg" id="welcomeDetails">
            <h2 class="m-b-xs font-bold m-t-none" id="username"></h2>
            <h4 class="text-primary font-bold" id="usertype"></h4>
        </div>
        <!--LC Table-->
        <section class="panel panel-default">
            <header class="panel-heading">
                <h4 class="font-bold">Letter of Credit</h4>
            </header>

            <header class="panel-heading">
                <div class="row">
                    <div class="col-sm-4">
                        <div class=" ">
                            <p class="font-bold">Filter by Country</p>


                            <div class="select filter" data-resize="auto">
                                <button data-toggle="dropdown" class="btn btn-sm btn-default dropdown-toggle">
                                                <span class="dropdown-label"></span>
                                                <span class="caret"></span>
                                            </button>
                                <!--get exporter id, account no and name from alan's database-->
                                <!--<ul id="country" name="country" class="dropdown-menu">

                                </ul>-->
                                <!-- <ul class="dropdown-menu">
                                                <li data-value="all" data-selected="true"><a href="#">All</a></li>
                                                <li data-value="lt5m"><a href="#">Population &lt; 5M</a></li>
                                                <li data-value="gte5m"><a href="#">Population &gt;= 5M</a></li>
                                            </ul>-->
                            </div>

                        </div>

                        <script>
                            //get all ref num
                            //get all contract details
                            //get all status

                            // var allLcs = getAllLcDetailsShipper();  // this method is calleed from Utility/lcOperations.js
                            //print all 
                            //console.log(allLcs);

                            //shipperHomeOperation(allLcs);
                            /*                       var country = document.getElementById("country");

                                                   var filters = {
                                                       "country": '',
                                                       "shipDate": ''
                                                   };

                                                   country.onchange = function() {
                                                       emptyShipperHome();
                                                       var lcs = [];
                                                       country = $('#country option:selected').val();
                                                       filters["country"] = country;
                                                       for (var i in allLcs) {
                                                           var countryCondition = allLcs[i]["country"] === filters["country"];
                                                           var shipDateCondition = allLcs[i]["shipDate"] === filters["shipDate"];
                                                           if (filters["shipDate"] === '') {
                                                               shipDateCondition = true;
                                                           }
                                                           if (filters["country"] === '') {
                                                               countryCondition = true;
                                                           }
                                                           if (countryCondition && shipDateCondition) {
                                                               lcs.unshift(allLcs[i]);
                                                           }
                                                       }
                                                       shipperHomeOperation(lcs);
                                                       //console.log(filters);
                                                       //console.log(lcs);



                                                   };

                                                   var shipDate = document.getElementById("shipDate");
                                                   shipDate.onchange = function() {
                                                       emptyShipperHome();
                                                       var lcs = [];
                                                       shipDate = $('#shipDate').val();
                                                       //console.log(shipDate);
                                                       filters["shipDate"] = shipDate;
                                                       for (var i in allLcs) {
                                                           var countryCondition = allLcs[i]["country"] === filters["country"];
                                                           var shipDateCondition = allLcs[i]["shipDate"] === filters["shipDate"];
                                                           if (filters["shipDate"] === '') {
                                                               shipDateCondition = true;
                                                           }
                                                           if (filters["country"] === '') {
                                                               countryCondition = true;
                                                           }
                                                           if (countryCondition && shipDateCondition) {
                                                               lcs.unshift(allLcs[i]);
                                                           }
                                                       }
                                                       shipperHomeOperation(lcs);
                                                       //console.log(filters);
                                                       //console.log(lcs);


                                                   };
                               */
                            ////console.log(filter);
                        </script>
                    </div>
                    <div class="col-sm-4">
                        <div class=" ">
                            <p class="font-bold">Filter by Ship Date</p>
                            <div class="btn-default" style="">

                                <div class="">
                                    <input type='text' class="form-control form_date" id='shipDate' data-date="" data-date-format="yyyy-mm-dd" data-link-field="shipDate" data-link-format="yyyy-mm-dd" name="shipDate" data-required="true" required/>
                                </div>
                            </div>
                        </div>


                    </div>

                    <div class="col-sm-4">



                    </div>

                </div>

            </header>

            <div class="table-responsive">
                <table class="table table-striped datagrid b-t b-light">
                    <thead>
                        <tr>
                            <th>
                                <div class="row">
                                    <div class="col-sm-8 m-t-xs m-b-xs">
                                        <div class="select filter" data-resize="auto">
                                            <button data-toggle="dropdown" class="btn btn-sm btn-default dropdown-toggle">
                                  <span class="dropdown-label"></span>
                                  <span class="caret"></span>
                                </button>
                                            <ul class="dropdown-menu">
                                                <li data-value="all" data-selected="true"><a href="#">All</a></li>
                                                <li data-value="lt5m"><a href="#">Population &lt; 5M</a></li>
                                                <li data-value="gte5m"><a href="#">Population &gt;= 5M</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="col-sm-4 m-t-xs m-b-xs">
                                        <div class="input-group search datagrid-search">
                                            <input type="text" class="input-sm form-control" placeholder="Search">
                                            <div class="input-group-btn">
                                                <button class="btn btn-default btn-sm"><i class="fa fa-search"></i></button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </th>
                        </tr>
                    </thead>

                    <tfoot>
                        <tr>
                            <th class="row">
                                <div class="datagrid-footer-left col-sm-6 text-center-xs m-l-n" style="display:none;">
                                    <div class="grid-controls m-t-sm">
                                        <span>
                                            <span class="grid-start"></span> -
                                        <span class="grid-end"></span> of
                                        <span class="grid-count"></span>
                                        </span>
                                        <div class="select grid-pagesize dropup" data-resize="auto">
                                            <button data-toggle="dropdown" class="btn btn-sm btn-default dropdown-toggle">
                                  <span class="dropdown-label"></span>
                                  <span class="caret"></span>
                                </button>
                                            <ul class="dropdown-menu">
                                                <li data-value="5"><a href="#">5</a></li>
                                                <li data-value="10"><a href="#">10</a></li>
                                                <li data-value="20" data-selected="true"><a href="#">20</a></li>
                                                <li data-value="50"><a href="#">50</a></li>
                                                <li data-value="100"><a href="#">100</a></li>
                                            </ul>
                                        </div>
                                        <span>Per Page</span>
                                    </div>
                                </div>
                                <div class="datagrid-footer-right col-sm-6 text-right text-center-xs" style="display:none;">
                                    <div class="grid-pager m-r-n">
                                        <button type="button" class="btn btn-sm btn-default grid-prevpage"><i class="fa fa-chevron-left"></i></button>
                                        <span>Page</span>
                                        <div class="inline">
                                            <div class="input-group dropdown combobox">
                                                <input class="input-sm form-control" type="text">
                                                <div class="input-group-btn dropup">
                                                    <button class="btn btn-sm btn-default" data-toggle="dropdown"><i class="caret"></i></button>
                                                    <ul class="dropdown-menu pull-right"></ul>
                                                </div>
                                            </div>
                                        </div>
                                        <span>of <span class="grid-pages"></span></span>
                                        <button type="button" class="btn btn-sm btn-default grid-nextpage"><i class="fa fa-chevron-right"></i></button>
                                    </div>
                                </div>
                            </th>
                        </tr>
                    </tfoot>
                </table>
            </div>

            <div class="table-responsive">
                <table class="table table-striped b-t b-light" id="lcTable">
                    <thead>

                        <tr>
                            <th>Reference Number</th>
                            <th>Country</th>
                            <th>Ship Date</th>
                            <th>Status</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody id="latestLCs">

                    </tbody>
                </table>
            </div>
            <footer class="panel-footer">
                <div class="row">
                    <div class="col-sm-4 hidden-xs">
                    </div>
                    <div class="col-sm-4 text-center">
                        <a id="viewLcLogTemplate" class="pagesButton btn btn-s-md btn-dark">View All LC</a>
                    </div>
                    <div class="col-sm-4 text-right text-center-xs">

                    </div>

                </div>
            </footer>
        </section>
        <!--End of LC Table-->


    </section>
    <a href="#" class="hide nav-off-screen-block" data-toggle="class:nav-off-screen, open" data-target="#nav,html"></a>
</section>
<aside class="bg-light lter b-l aside-md hide" id="notes">
    <div class="wrapper">Notification</div>
</aside>
<!-- Button trigger modal -->


<!-- Modal -->
<div class="modal fade" id="lcDetailsModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">

</div>
<script>
    $(document).ready(function() {
        //protectAdmin(); // calling from userHandling
        var getUserItem = sessionStorage.getItem('admin');
        var user = $.parseJSON(getUserItem);
        //console.log(user.customerID);
        $('#username').html("Welcome back, " + user.userID);
        var usertype = user.usertype;
        $('#usertype').html(convertToDisplay(usertype, " ") + " (Customer ID - " + user.customerID + ")");

        $("#lcDetailsModal").load("../lcDetailsModal.html");
        //homeOperation(); //calling this method from assets/js/Utility/lcOperations.js
        //shipperTest();
        //loadLcDetailsModal(); //this method is called from lcOperation.js
       /* var countries = getAllCountries();

        var $optionCell = $("<li data-value='all' data-selected='true'><a href='#'>All</a></li>");
        var option = "<li data-value='all' data-selected='true'><a href='#'>All</a></li>";
        for (var i in countries) {
            option += "<li data-value='" + countries[i] + "'><a href='#'>" + countries[i] + "</a></li>";
        }
        $('#country').append(option);*/


    });
</script>
<script src="../assets/js/jquery.min.js"></script>
<!-- Bootstrap -->
<script src="../assets/js/bootstrap.js"></script>
<!-- App -->
<script src="../assets/js/app.js"></script>
<script src="../assets/js/slimscroll/jquery.slimscroll.min.js"></script>

<!-- fuelux -->
<script src="../assets/js/libs/underscore-min.js"></script>
<script src="../assets/js/fuelux/fuelux.js"></script>
<script src="../assets/js/DAO/dataGrid.js"></script>
<!--<script src="../assets/js/fuelux/demo.datagrid.js"></script>-->
<script src="../assets/js/app.plugin.js"></script>

<script type="text/javascript" src="../assets/js/datepicker/bootstrap-datetimepicker.js" charset="UTF-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment-with-locales.js" charset="UTF-8"></script>


<script type="text/javascript">
    $('.form_date').datetimepicker({
        weekStart: 1,
        todayBtn: 1,
        autoclose: 1,
        todayHighlight: 1,
        startView: 2,
        minView: 2,
        forceParse: 0
    });
</script>
<script>
    //once page button clicked, the user is redirected to importer/exporter.html, together with a html page name for loading (stored in a session)
    $(".pagesButton").click(function() {
        var page = $(this).attr('id');
        var pageToLoad = {
            page: page
        };
        sessionStorage.setItem('page', JSON.stringify(pageToLoad));
        window.location.replace("/SMUtBank_TradeFinance/" + sessionStorage.usertype + "/" + sessionStorage.usertype + ".html");
    });
</script>