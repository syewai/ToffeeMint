<!DOCTYPE html>

<section class="vbox">
    <section class="scrollable">

        <div class="wrapper-lg" id="welcomeDetails">
            <h2 class="m-b-xs font-bold m-t-none" id="username"></h2>
            <h4 class="text-primary font-bold" id="usertype"></h4>
        </div>
        <!--LC Table-->
        <section class="panel panel-default">
            <header class="panel-heading">
                <h4 class="font-bold">Letter of Credit</h4>
            </header>


            <div class="table-responsive">
                <table class="table table-striped b-t b-light" id="lcTable">
                    <thead>
                        <tr>
                            <th>Reference Number</th>
                            <th id="roleTh"></th>
                            <th>Expiry Date</th>
                            <th>Status</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody id="latestLCs">

                    </tbody>
                </table>
            </div>
            <footer class="panel-footer">
                <div class="row">
                    <div class="col-sm-4 hidden-xs">
                    </div>
                    <div class="col-sm-4 text-center">
                        <a id="viewLcLogTemplate" class="pagesButton btn btn-s-md btn-dark">View All LC</a>
                    </div>
                    <div class="col-sm-4 text-right text-center-xs">

                    </div>

                </div>
            </footer>
        </section>
        <!--End of LC Table-->


    </section>
    <a href="#" class="hide nav-off-screen-block" data-toggle="class:nav-off-screen, open" data-target="#nav,html"></a>
</section>
<aside class="bg-light lter b-l aside-md hide" id="notes">
    <div class="wrapper">Notification</div>
</aside>
<!-- Button trigger modal -->


<!-- Modal -->
<div class="modal fade" id="lcDetailsModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">

</div>
<script>
    $(document).ready(function() {
        protectUser(); // calling from userHandling
        var getUserItem = sessionStorage.getItem('user');
        var user = $.parseJSON(getUserItem);
        //console.log(user.customerID);
        $('#username').html("Welcome back, " + user.userID);
        var usertype = user.usertype;
        $('#usertype').html(convertToDisplay(usertype, " ") + " (Customer ID - " + user.customerID + ")");
        var colHeader = "Importer";
        if (usertype === "importer") {
            colHeader = "Exporter";
        }
        $('#roleTh').html(colHeader + " account");
        $("#lcDetailsModal").load("../lcDetailsModal.html");
        homeOperation(); //calling this method from assets/js/Utility/lcOperations.js
        loadLcDetailsModal(); //this method is called from lcOperation.js

    });
</script>

<script>
    //once page button clicked, the user is redirected to importer/exporter.html, together with a html page name for loading (stored in a session)



    $(".pagesButton").click(function() {
        var page = $(this).attr('id');
        var pageToLoad = {
            page: page
        };
        sessionStorage.setItem('page', JSON.stringify(pageToLoad));
        window.location.replace("/SMUtBank_TradeFinance/" + sessionStorage.usertype + "/" + sessionStorage.usertype + ".html");
    });

    $(".homeButton").click(function() {
        var refNum = $(this).attr('data-refnum');
        var page = $(this).attr('id');
        console.log("TEST!!!!!!!!!!!!!!!!");
        var pageToLoad = {
            page: page
        };
        if (refNum != undefined) {
            pageToLoad.refNum = refNum;
        }
        sessionStorage.setItem('page', JSON.stringify(pageToLoad));
        window.location.replace("/SMUtBank_TradeFinance/" + sessionStorage.usertype + "/" + sessionStorage.usertype + ".html?refNum=" + refNum);
    });
</script>